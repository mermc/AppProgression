<!-- Barra de navegaci칩n -->
<mat-toolbar color="primary" class="toolbar">
  <span class="app-title">Panel General</span>

  <span class="spacer"></span>

  <button
    mat-button
    (click)="cambiarVista('personas')"
    [disabled]="vistaActual === 'personas'"
  >
    Personas
  </button>
  <button
    mat-button
    (click)="cambiarVista('grupos')"
    [disabled]="vistaActual === 'grupos'"
  >
    Grupos
  </button>

  <button mat-icon-button [matMenuTriggerFor]="menu">
    <mat-icon>account_circle</mat-icon>
  </button>

  <mat-menu #menu="matMenu">
    <button mat-menu-item (click)="irAPerfil()">Ver Perfil</button>
    <!-- <button mat-menu-item (click)="logout()">Cerrar sesi칩n</button> -->
  </mat-menu>
</mat-toolbar>

<!-- Contenido principal -->
<div class="contenido">
  <mat-card>
    <h2 *ngIf="vistaActual === 'personas'">Personas</h2>
    <h2 *ngIf="vistaActual === 'grupos'">Grupos</h2>

    <!-- Lista din치mica -->
    <mat-list>
      <mat-list-item
        *ngFor="let item of (vistaActual === 'personas' ? personas$ : grupos$) | async"
        (click)="irADetalle(item, vistaActual)"
        class="clickable-item"
      >
        <mat-icon matListIcon>
          {{ vistaActual === 'personas' ? 'person' : 'group' }}
        </mat-icon>

        <div
          style="
            display: grid;
            grid-template-columns: auto auto 1fr;
            gap: 8px;
            align-items: center;
            width: 100%;
          "
        >
          <h4 matLine style="margin: 0;">{{ item.nombre }}</h4>
          <h4
            *ngIf="vistaActual === 'personas'"
            matLine
            style="margin: 0;"
          >
            {{ item.apellidos }}
          </h4>
          <h4
            *ngIf="item.observaciones"
            matLine
            style="margin: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"
          >
            {{ item.observaciones }}
          </h4>
        </div>
      </mat-list-item>
    </mat-list>
  </mat-card>

  <!-- Bot칩n flotante -->
  <button mat-fab color="accent" class="add-btn" (click)="crearNuevo()">
    <mat-icon>add</mat-icon>
  </button>
</div>
